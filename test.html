<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PokÃ©monSleepCooking</title>
    <style>
        :root {
            --primary: #4A90E2;
            --bg: #F0F4F8;
            --card-bg: #FFFFFF;
            --text: #333;
            --accent: #FF6B6B;
            --green: #4CAF50;
            --energy-color: #F5A623;
            --alert-color: #e74c3c;
            --all-btn-active: #555555;
        }
        body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 10px;
            padding-bottom: 160px;
            -webkit-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            touch-action: manipulation; 
        }
        
        button, input, .recipe-card {
            touch-action: manipulation;
        }
        
        h1 { 
            font-size: 1.5rem; 
            text-align: center; 
            color: var(--primary); 
            margin-bottom: 15px; 
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        .title-icon {
            height: 2.2rem;
            width: auto;
            object-fit: contain;
            border-radius: 12px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .container { max-width: 900px; margin: 0 auto; }
        
        .controls-area {
            background: white;
            padding: 10px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 15px;
            text-align: center;
            position: relative;
        }

        .set-manager-btn {
            display: inline-block;
            width: auto;
            margin-bottom: 12px;
            padding: 10px 20px;
            background: #6c5ce7;
            color: white;
            border: none;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            font-size: 0.95rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .set-manager-btn:active { opacity: 0.8; transform: translateY(1px); }

        .filters { display: flex; gap: 5px; justify-content: center; margin-bottom: 10px; flex-wrap: wrap; }
        .filter-btn {
            padding: 8px 14px;
            border: 1px solid #ddd; 
            border-radius: 15px; 
            background: #fff; 
            cursor: pointer; 
            font-weight: bold; 
            font-size: 0.85rem; 
            transition: all 0.2s; 
            color: #666;
        }
        .filter-btn.active { background: var(--primary); color: white; border-color: var(--primary); }
        .filter-btn.all-btn { border-color: #666; color: #666; background: #fff; }
        .filter-btn.all-btn.active { background: var(--all-btn-active); color: white; border-color: var(--all-btn-active); }

        .energy-filter {
            display: flex; align-items: center; justify-content: center; gap: 8px; flex-wrap: wrap;
            font-size: 0.9rem;
            font-weight: bold;
            color: #555;
        }
        .energy-input {
            padding: 6px; border: 1px solid #ccc; border-radius: 6px; width: 90px; text-align: center; font-size: 1rem;
        }

        #hidden-alert {
            margin-top: 8px;
            font-size: 0.85rem;
            color: #999;
            transition: color 0.3s;
        }
        #hidden-alert.alert-active { color: var(--alert-color); font-weight: bold; }

        .recipe-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
            gap: 8px;
        }
        .recipe-card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 8px 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            text-align: center;
            cursor: pointer;
            user-select: none;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
            position: relative;
        }
        .recipe-card.selected { border-color: var(--primary); background-color: #f0f8ff; }
        
        .recipe-img {
            width: 50px;
            height: 50px;
            object-fit: contain;
            margin: 2px auto;
            display: block;
        }

        .recipe-meta {
            display: flex;
            justify-content: center;
            gap: 4px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-bottom: 2px;
            line-height: 1.2;
            flex-wrap: wrap;
        }
        .meta-energy { color: var(--energy-color); white-space: nowrap; }
        .meta-ing { color: #666; white-space: nowrap; }

        .recipe-name { 
            font-size: 0.8rem;
            font-weight: bold; 
            line-height: 1.35; 
            min-height: 2.7em; 
            display: flex; align-items: center; justify-content: center; 
            margin-bottom: 4px;
            overflow: hidden;
            word-break: break-all;
        }
        
        .count-badge {
            background: var(--primary); color: white;
            border-radius: 50%; width: 26px; height: 26px;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; margin: 0 auto;
            font-size: 0.9rem;
        }
        .hidden { display: none !important; }

        .card-controls { display: flex; justify-content: center; margin-top: 5px; }
        .sub-btn { 
            background: #ccc; border: none; width: 24px; height: 24px; 
            border-radius: 50%; font-weight: bold; cursor: pointer; 
            color: #555; display: flex; align-items: center; justify-content: center; padding: 0; font-size: 0.9rem;
        }

        .dashboard {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: rgba(255, 255, 255, 0.98);
            border-top: 1px solid #ddd;
            padding: 10px 15px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 100;
            padding-bottom: max(10px, env(safe-area-inset-bottom));
        }
        .dash-content { max-width: 900px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center;}
        .reset-btn { background: var(--accent); color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 0.95rem;}
        
        .result-section { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 40px;}
        @media (max-width: 600px) { .result-section { grid-template-columns: 1fr; } }
        
        .ingredient-list { list-style: none; padding: 0; margin: 0; }
        .ingredient-item {
            display: flex; justify-content: space-between; align-items: center;
            background: white; padding: 8px 12px; margin-bottom: 4px; border-radius: 6px;
            font-size: 0.9rem;
        }
        
        .surplus-tag { background: #ffebee; color: #c62828; }
        .needed-tag { background: #e0f2f1; color: #00695c; }
        
        .ing-name { font-weight: 600; font-size: 0.95rem; }
        .ing-count { font-weight: bold; font-size: 1rem; }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed; 
            z-index: 200; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(3px);
            -webkit-backdrop-filter: blur(3px);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 90%;
            max-width: 500px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            position: relative;
        }

        .close-modal {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
            padding: 0 10px;
        }

        .save-input-group {
            display: flex; gap: 10px; margin-bottom: 15px; margin-top: 10px;
        }
        .set-name-input {
            flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 6px; font-size: 1rem;
        }
        .save-btn {
            background: var(--primary); color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: bold; white-space: nowrap;
        }
        
        .saved-sets-list {
            list-style: none; padding: 0; margin: 0; max-height: 300px; overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .saved-set-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            background: white;
            transition: background-color 0.2s, transform 0.2s;
            /* iOSã§ã®é•·æŠ¼ã—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç­‰ã‚’ç„¡åŠ¹åŒ– */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
        }
        .saved-set-item:last-child { border-bottom: none; }
        
        .saved-set-item.dragging {
            opacity: 0.5;
            background: #f0f8ff;
            border: 2px dashed #4A90E2;
        }

        /* ãƒ‰ãƒ©ãƒƒã‚°ãƒãƒ³ãƒ‰ãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ«å¼·åŒ– */
        .drag-handle {
            cursor: grab;
            margin-right: 12px;
            color: #bbb;
            font-size: 1.6rem; /* å°‘ã—å¤§ãã */
            line-height: 1;
            padding: 5px 10px; /* ã‚¿ãƒƒãƒ—é ˜åŸŸã‚’åºƒã */
            touch-action: none; /* ã“ã“ãŒé‡è¦ï¼šãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç­‰ã‚’ç„¡åŠ¹åŒ– */
        }
        .drag-handle:active {
            color: var(--primary);
        }
        
        .set-name { 
            font-weight: bold; font-size: 1rem; cursor: pointer; 
            flex: 1; 
            padding: 5px 0;
        }
        .set-name:hover {
            color: var(--primary); text-decoration: underline;
        }
        .set-actions { display: flex; gap: 8px; }
        
        .load-btn {
            background: #4CAF50; color: white; border: none; padding: 8px 14px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; font-weight: bold;
        }
        .rename-btn {
            background: #f39c12; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 0.85rem;
        }
        .delete-btn {
            background: #e74c3c; color: white; border: none; padding: 8px 14px; border-radius: 6px; cursor: pointer; font-size: 0.85rem;
        }

        @media screen and (max-width: 480px) {
            .container { padding: 5px; }
            .recipe-card { padding: 6px 2px; }
            .recipe-name { font-size: 0.85rem; }
            .recipe-meta { font-size: 0.8rem; }
            .count-badge { width: 28px; height: 28px; font-size: 1rem; }
            .sub-btn { width: 28px; height: 28px; font-size: 1rem; }
        }

        @supports (-webkit-touch-callout: none) {
            body {
                -webkit-text-size-adjust: 100%;
                -webkit-font-smoothing: antialiased;
            }
            .recipe-name { font-size: 0.8rem; line-height: 1.35; }
            .recipe-meta { font-size: 0.75rem; }
            .filter-btn { font-size: 0.85rem; padding: 7px 12px; }
            .ingredient-item { padding: 8px 12px; }
            .ing-name { font-size: 0.95rem; }
            .ing-count { font-size: 1rem; }
        }

        /* --- æ–™ç†ã‚»ãƒƒãƒˆç®¡ç†ç”»é¢ã®UIæ”¹å–„ï¼ˆãƒªã‚¹ãƒˆé ˜åŸŸæ‹¡å¼µç‰ˆï¼‰ --- */

        /* 1. å¤–æ ï¼ˆãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å…¨ä½“ï¼‰ã®è¨­å®š */
        #setModal .modal-content {
            /* é«˜ã•ã‚’ç”»é¢ã®70%ã«ã€Œå›ºå®šã€ã—ã¾ã™ï¼ˆå°ã•ãã—ã¾ã›ã‚“ï¼‰ */
            height: 70vh !important;      
            max-height: 70vh !important;
            
            /* ä¸­èº«ã‚’ç¸¦ã«ä¸¦ã¹ã¦ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆåˆ¶å¾¡ */
            display: flex !important;
            flex-direction: column !important;
            
            padding-bottom: 0 !important;
            overflow: hidden !important; 
        }
        
        /* 2. ä¸Šã®ãƒ‘ãƒ¼ãƒ„ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ã‚„å…¥åŠ›æ¬„ï¼‰ã¯ã‚µã‚¤ã‚ºå›ºå®š */
        #setModal .modal-content > h2,
        #setModal .modal-content > .save-input-group,
        #setModal .modal-content > .close-modal {
            flex-shrink: 0 !important; 
        }
        
        /* 3. ãƒªã‚¹ãƒˆéƒ¨åˆ†ï¼ˆiOSå¯¾ç­–ãƒ»æ“ä½œã‚¨ãƒªã‚¢åˆ†é›¢ç‰ˆï¼‰ */
        #saved-sets-list {
            /* ãƒªã‚¹ãƒˆå…¨ä½“ã®è¡¨ç¤ºè¨­å®š */
            flex-grow: 1 !important;
            height: auto !important;
            max-height: none !important;
            overflow-y: auto !important; 
            
            /* iOSã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é€£é–ã‚’é˜²ãï¼ˆå‰å›ã¨åŒã˜ï¼‰ */
            overscroll-behavior-y: contain !important;
            -webkit-overflow-scrolling: touch !important;
        
            margin-top: 10px;
            padding-bottom: 20px; 
        }
        
        /* --- â˜…ã“ã“ãŒæ–°ã—ã„å¤‰æ›´ç‚¹ã§ã™â˜… --- */
        
        /* 1. ãƒªã‚¹ãƒˆã®å„è¡Œï¼ˆé’æ ã‚¨ãƒªã‚¢ã®æŒ™å‹•ï¼‰ */
        /* åŸºæœ¬çš„ã«ã€Œã“ã“ã¯ãƒ‰ãƒ©ãƒƒã‚°ã™ã‚‹å ´æ‰€ã ã‹ã‚‰ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã¯ç¦æ­¢ï¼ã€ã¨æŒ‡ç¤ºã—ã¾ã™ */
        #saved-sets-list li {
            touch-action: none; 
        }
        
        /* 2. å³å´ã®ãƒœã‚¿ãƒ³é¡ï¼ˆèµ¤æ ã‚¨ãƒªã‚¢ã®æŒ™å‹•ï¼‰ */
        /* ãƒœã‚¿ãƒ³ã®ä¸Šã ã‘ã¯ã€Œã“ã“ã¯ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ“ä½œã«ä½¿ã£ã¦ã„ã„ã‚ˆï¼ã€ã¨ä¸Šæ›¸ãè¨±å¯ã—ã¾ã™ */
        #saved-sets-list li button {
            touch-action: pan-y !important;
        }
        
        /* ï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®šã¯ãã®ã¾ã¾ï¼‰ */
        #saved-sets-list::-webkit-scrollbar { width: 20px; }
        #saved-sets-list::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        #saved-sets-list::-webkit-scrollbar-thumb { background-color: #888; border-radius: 10px; border: 4px solid transparent; background-clip: content-box; }
        #saved-sets-list::-webkit-scrollbar-thumb:hover { background-color: #555; }

    </style>
</head>
<body>

<div class="container">
    <h1><img src="images/icon.png" alt="" class="title-icon"> PokÃ©monSleepCooking</h1>

    <div class="controls-area">
        <button class="set-manager-btn" onclick="openModal()">ğŸ“ æ–™ç†ã‚»ãƒƒãƒˆã®ä¿å­˜ãƒ»å‘¼å‡º</button>

        <div class="filters">
            <button class="filter-btn all-btn active" id="btn-all" onclick="setCategory('all')">å…¨é¸æŠ</button>
            <button class="filter-btn active" id="btn-ã‚«ãƒ¬ãƒ¼" onclick="setCategory('ã‚«ãƒ¬ãƒ¼')">ã‚«ãƒ¬ãƒ¼</button>
            <button class="filter-btn active" id="btn-ã‚µãƒ©ãƒ€" onclick="setCategory('ã‚µãƒ©ãƒ€')">ã‚µãƒ©ãƒ€</button>
            <button class="filter-btn active" id="btn-ãƒ‡ã‚¶ãƒ¼ãƒˆ" onclick="setCategory('ãƒ‡ã‚¶ãƒ¼ãƒˆ')">ãƒ‡ã‚¶ãƒ¼ãƒˆ</button>
        </div>
        
        <div class="energy-filter">
            <label for="energy-threshold">âš¡ åŸºæº–ã‚¨ãƒŠã‚¸ãƒ¼:</label>
            <input type="number" id="energy-threshold" class="energy-input" value="10000" step="1000" oninput="applyFilters()">
            <span>ä»¥ä¸‹ã‚’éè¡¨ç¤º</span>
        </div>

        <div id="hidden-alert">é¸æŠæ¸ˆã¿ã®éè¡¨ç¤ºæ–™ç†ï¼š0</div>
    </div>

    <div id="recipe-list" class="recipe-grid">
        </div>

    <div class="result-section">
        <div>
            <h2 style="font-size:1rem; border-left:4px solid var(--primary); padding-left:8px; margin:0 0 10px 0;">
                ğŸ“¦ é€±å‰å‚™è“„ã«å¿…è¦ãªé£Ÿæ <span id="needed-count-display" style="font-size:0.9rem; font-weight:normal; margin-left:5px; color:#555;">(è¨ˆ: 0å€‹)</span>
            </h2>
            <ul id="needed-list" class="ingredient-list"></ul>
        </div>
        <div>
            <h2 style="font-size:1rem; border-left:4px solid var(--primary); padding-left:8px; margin:0 0 10px 0;">ğŸ—‘ï¸ ä½™å‰°é£Ÿæ</h2>
            <ul id="surplus-list" class="ingredient-list"></ul>
        </div>
    </div>
</div>

<div id="setModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal()">&times;</span>
        <h2 style="font-size:1.1rem; margin:0 0 15px 0; color:#555; border-bottom:2px solid #eee; padding-bottom:10px;">ğŸ“ æ–™ç†ã‚»ãƒƒãƒˆã®ç®¡ç†</h2>
        
        <div class="save-input-group">
            <input type="text" id="set-name-input" class="set-name-input" placeholder="ã‚»ãƒƒãƒˆå (ä¾‹: ã‚«ãƒ¬ãƒ¼é€±)">
            <button class="save-btn" onclick="saveCurrentSet()">ä¿å­˜</button>
        </div>
        
        <ul id="saved-sets-list" class="saved-sets-list"></ul>
    </div>
</div>

<div class="dashboard">
    <div class="dash-content">
        <div>
            <span style="font-weight:bold; font-size: 1rem;">é¸æŠ: <span id="total-meals">0</span>é£Ÿ</span>
        </div>
        <button class="reset-btn" onclick="resetAll()">ã‚ªãƒ¼ãƒ«ã‚¯ãƒªã‚¢</button>
    </div>
</div>

<script>
const ING_ICONS = {
    "ãµã¨ã„ãªãŒã­ã": "ğŸ‹",
    "ã‚ã˜ã‚ã„ã‚­ãƒã‚³": "ğŸ„",
    "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": "ğŸ¥š",
    "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": "ğŸ¥”",
    "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": "ğŸ",
    "ã’ãã‹ã‚‰ãƒãƒ¼ãƒ–": "ğŸŒ¿",
    "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": "ğŸ¥“",
    "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": "ğŸ¥›",
    "ã‚ã¾ã„ãƒŸãƒ„": "ğŸ¯",
    "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": "ğŸ§´",
    "ã‚ã£ãŸã‹ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼": "ğŸ”¥",
    "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": "ğŸ…",
    "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚«ã‚«ã‚ª": "ğŸ«",
    "ãŠã„ã—ã„ã‚·ãƒƒãƒ": "ğŸ–",
    "ãƒ¯ã‚«ã‚¯ã‚µå¤§è±†": "ğŸŸ¢",
    "ãƒ¯ã‚«ã‚¯ã‚µã‚³ãƒ¼ãƒ³": "ğŸŒ½",
    "ã‚ã–ã¾ã—ã‚³ãƒ¼ãƒ’ãƒ¼": "â˜•",
    "ãšã£ã—ã‚Šã‚«ãƒœãƒãƒ£": "ğŸƒ",
    "ã¤ã‚„ã¤ã‚„ã‚¢ãƒœã‚«ãƒ‰": "ğŸ¥‘"
};
const ALL_INGREDIENTS = [
    "ãµã¨ã„ãªãŒã­ã",
    "ã‚ã˜ã‚ã„ã‚­ãƒã‚³",
    "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°",
    "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ",
    "ã¨ãã›ã‚“ãƒªãƒ³ã‚´",
    "ã’ãã‹ã‚‰ãƒãƒ¼ãƒ–",
    "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ",
    "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯",
    "ã‚ã¾ã„ãƒŸãƒ„",
    "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«",
    "ã‚ã£ãŸã‹ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼",
    "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ",
    "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚«ã‚«ã‚ª",
    "ãŠã„ã—ã„ã‚·ãƒƒãƒ",
    "ãƒ¯ã‚«ã‚¯ã‚µå¤§è±†",
    "ãƒ¯ã‚«ã‚¯ã‚µã‚³ãƒ¼ãƒ³",
    "ã‚ã–ã¾ã—ã‚³ãƒ¼ãƒ’ãƒ¼",
    "ãšã£ã—ã‚Šã‚«ãƒœãƒãƒ£",
    "ã¤ã‚„ã¤ã‚„ã‚¢ãƒœã‚«ãƒ‰"
];
const RECIPES = [
    {
        "id": "ã‚«ãƒ¬ãƒ¼_0",
        "name": "ã—ã‚“ã‚Šã‚‡ãã‚¢ãƒœã‚«ãƒ‰ã‚°ãƒ©ã‚¿ãƒ³",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 24802,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 41,
            "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": 20,
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 32,
            "ã¤ã‚„ã¤ã‚„ã‚¢ãƒœã‚«ãƒ‰": 22
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_1",
        "name": "ã„ã‚ã„ãã‚Šã™ãç„¼ãã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 20655,
        "ingredients": {
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 26,
            "ãµã¨ã„ãªãŒã­ã": 27,
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 22,
            "ã‚ã¾ã„ãƒŸãƒ„": 26
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_2",
        "name": "ã‚ã–ã‚ã‚‹ãƒ‘ãƒ¯ãƒ¼ã‚·ãƒãƒ¥ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 19061,
        "ingredients": {
            "ãƒ¯ã‚«ã‚¯ã‚µå¤§è±†": 28,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 25,
            "ã‚ã˜ã‚ã„ã‚­ãƒã‚³": 23,
            "ã‚ã–ã¾ã—ã‚³ãƒ¼ãƒ’ãƒ¼": 16
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_3",
        "name": "ãªã‚Šãã‚Šãƒã‚±ãƒƒãƒãƒ£ã‚·ãƒãƒ¥ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 15621,
        "ingredients": {
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 16,
            "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": 18,
            "ã‚ã˜ã‚ã„ã‚­ãƒã‚³": 25,
            "ãšã£ã—ã‚Šã‚«ãƒœãƒãƒ£": 10
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_4",
        "name": "ã‚Œã‚“ã”ãã‚³ãƒ¼ãƒ³ã‚­ãƒ¼ãƒã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 13690,
        "ingredients": {
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 24,
            "ã’ãã‹ã‚‰ãƒãƒ¼ãƒ–": 27,
            "ã‚ã£ãŸã‹ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼": 12,
            "ãƒ¯ã‚«ã‚¯ã‚µã‚³ãƒ¼ãƒ³": 14
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_5",
        "name": "ãƒ‹ãƒ³ã‚¸ãƒ£ã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 9445,
        "ingredients": {
            "ãƒ¯ã‚«ã‚¯ã‚µå¤§è±†": 24,
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 9,
            "ãµã¨ã„ãªãŒã­ã": 12,
            "ã‚ã˜ã‚ã„ã‚­ãƒã‚³": 5
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_6",
        "name": "ãœã£ãŸã„ã­ã‚€ã‚Šãƒã‚¿ãƒ¼ã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 9010,
        "ingredients": {
            "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚«ã‚«ã‚ª": 12,
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 10,
            "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": 18,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 15
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_7",
        "name": "ã‚ã¶ã‚Šãƒ†ãƒ¼ãƒ«ã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 7483,
        "ingredients": {
            "ã’ãã‹ã‚‰ãƒãƒ¼ãƒ–": 25,
            "ãŠã„ã—ã„ã‚·ãƒƒãƒ": 8
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_8",
        "name": "ã‹ã‚‰ãã¡ãƒã‚®ã‚‚ã‚Šã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 5900,
        "ingredients": {
            "ãµã¨ã„ãªãŒã­ã": 14,
            "ã’ãã‹ã‚‰ãƒãƒ¼ãƒ–": 8,
            "ã‚ã£ãŸã‹ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼": 10
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_9",
        "name": "ãƒ”ãƒ¨ãƒ”ãƒ¨ãƒ‘ãƒ³ãƒè¾›å£ã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 5702,
        "ingredients": {
            "ã’ãã‹ã‚‰ãƒãƒ¼ãƒ–": 11,
            "ã‚ã¾ã„ãƒŸãƒ„": 11,
            "ã‚ã–ã¾ã—ã‚³ãƒ¼ãƒ’ãƒ¼": 11
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_10",
        "name": "ã˜ã‚…ã†ãªã‚“ã‚³ãƒ¼ãƒ³ã‚·ãƒãƒ¥ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 4670,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 8,
            "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": 8,
            "ãƒ¯ã‚«ã‚¯ã‚µã‚³ãƒ¼ãƒ³": 14
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_11",
        "name": "ãŠã‚„ã“ã‚ã„ã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 4523,
        "ingredients": {
            "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": 4,
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 11,
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 8,
            "ã‚ã¾ã„ãƒŸãƒ„": 12
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_12",
        "name": "ã‚­ãƒã‚³ã®ã»ã†ã—ã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 4162,
        "ingredients": {
            "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": 9,
            "ã‚ã˜ã‚ã„ã‚­ãƒã‚³": 14
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_13",
        "name": "ãƒ“ãƒ«ãƒ‰ã‚¢ãƒƒãƒ—ãƒãƒ¡ã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 3372,
        "ingredients": {
            "ãƒ¯ã‚«ã‚¯ã‚µå¤§è±†": 12,
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 6,
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 4,
            "ã’ãã‹ã‚‰ãƒãƒ¼ãƒ–": 4
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_14",
        "name": "ã»ã£ã“ã‚Šãƒ›ãƒ¯ã‚¤ãƒˆã‚·ãƒãƒ¥ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 3181,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 10,
            "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": 8,
            "ã‚ã˜ã‚ã„ã‚­ãƒã‚³": 4
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_15",
        "name": "ã¨ã‘ã‚‹ã‚ªãƒ ã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 2150,
        "ingredients": {
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 10,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 6
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_16",
        "name": "ã‚µãƒ³ãƒ‘ãƒ¯ãƒ¼ãƒˆãƒãƒˆã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 2078,
        "ingredients": {
            "ã’ãã‹ã‚‰ãƒãƒ¼ãƒ–": 5,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 10
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_17",
        "name": "ã²ã§ã‚Šã‚«ãƒ„ãƒ¬ãƒ„ã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 1942,
        "ingredients": {
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 10,
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 5
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_18",
        "name": "æº€è…¹ãƒãƒ¼ã‚ºãƒãƒ¼ã‚°ã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 1910,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 8,
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 8
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_19",
        "name": "ãƒãƒ¡ãƒãƒ¼ã‚°ã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 856,
        "ingredients": {
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 7
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_20",
        "name": "ãƒ™ã‚¤ãƒ“ã‚£ãƒãƒ‹ãƒ¼ã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 839,
        "ingredients": {
            "ã‚ã¾ã„ãƒŸãƒ„": 7
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_21",
        "name": "ãŸã‚“ã˜ã‚…ã‚“ãƒ›ãƒ¯ã‚¤ãƒˆã‚·ãƒãƒ¥ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 814,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 7
        }
    },
    {
        "id": "ã‚«ãƒ¬ãƒ¼_22",
        "name": "ã¨ãã›ã‚“ãƒªãƒ³ã‚´ã‚«ãƒ¬ãƒ¼",
        "type": "ã‚«ãƒ¬ãƒ¼",
        "energy": 748,
        "ingredients": {
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 7
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_23",
        "name": "ã˜ãªã‚‰ã—ãƒ¯ã‚«ãƒ¢ãƒ¬ãƒãƒƒãƒ—ã‚¹",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 25162,
        "ingredients": {
            "ãƒ¯ã‚«ã‚¯ã‚µå¤§è±†": 22,
            "ã’ãã‹ã‚‰ãƒãƒ¼ãƒ–": 30,
            "ãƒ¯ã‚«ã‚¯ã‚µã‚³ãƒ¼ãƒ³": 25,
            "ã¤ã‚„ã¤ã‚„ã‚¢ãƒœã‚«ãƒ‰": 28
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_24",
        "name": "ã¾ã‘ã‚“ãã‚³ãƒ¼ãƒ’ãƒ¼ã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 20218,
        "ingredients": {
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 28,
            "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": 22,
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 22,
            "ã‚ã–ã¾ã—ã‚³ãƒ¼ãƒ’ãƒ¼": 28
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_25",
        "name": "ã‚Šã‚“ã”ã•ã‚“ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 19293,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 18,
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 28,
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 35,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 23
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_26",
        "name": "ã¯ãªãµã¶ããƒŸãƒ¢ã‚¶ã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 11811,
        "ingredients": {
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 12,
            "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": 15,
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 17,
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 25
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_27",
        "name": "ãƒ‹ãƒ³ã‚¸ãƒ£ã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 11659,
        "ingredients": {
            "ãƒ¯ã‚«ã‚¯ã‚µå¤§è±†": 19,
            "ãµã¨ã„ãªãŒã­ã": 15,
            "ã‚ã£ãŸã‹ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼": 11,
            "ã‚ã˜ã‚ã„ã‚­ãƒã‚³": 12
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_28",
        "name": "ãƒ¯ã‚«ã‚¯ã‚µã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 11393,
        "ingredients": {
            "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": 9,
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 22,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 14,
            "ãƒ¯ã‚«ã‚¯ã‚µã‚³ãƒ¼ãƒ³": 17
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_29",
        "name": "ã‚¯ãƒ­ã‚¹ãƒãƒ§ãƒƒãƒ—ãƒ‰ã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 8755,
        "ingredients": {
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 15,
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 20,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 10,
            "ãƒ¯ã‚«ã‚¯ã‚µã‚³ãƒ¼ãƒ³": 11
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_30",
        "name": "ãƒ¤ãƒ‰ãƒ³ãƒ†ãƒ¼ãƒ«ã®ãƒšãƒƒãƒ‘ãƒ¼ã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 8169,
        "ingredients": {
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 15,
            "ã’ãã‹ã‚‰ãƒãƒ¼ãƒ–": 10,
            "ãŠã„ã—ã„ã‚·ãƒƒãƒ": 10
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_31",
        "name": "ã‚ã„ãã†ã‚¹ã‚¤ãƒ¼ãƒˆã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 7675,
        "ingredients": {
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 21,
            "ã‚ã¾ã„ãƒŸãƒ„": 16,
            "ãƒ¯ã‚«ã‚¯ã‚µã‚³ãƒ¼ãƒ³": 12
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_32",
        "name": "ãã ã‘ã‚‹ã‚¢ãƒœã‚«ãƒ‰ã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 7125,
        "ingredients": {
            "ãƒ¯ã‚«ã‚¯ã‚µå¤§è±†": 18,
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 10,
            "ã¤ã‚„ã¤ã‚„ã‚¢ãƒœã‚«ãƒ‰": 14
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_33",
        "name": "ã‚­ãƒã‚³ã®ã»ã†ã—ã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 5859,
        "ingredients": {
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 8,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 8,
            "ã‚ã˜ã‚ã„ã‚­ãƒã‚³": 17
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_34",
        "name": "ã‚ªãƒ¼ãƒãƒ¼ãƒ’ãƒ¼ãƒˆã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 5225,
        "ingredients": {
            "ã’ãã‹ã‚‰ãƒãƒ¼ãƒ–": 17,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 8,
            "ã‚ã£ãŸã‹ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼": 10
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_35",
        "name": "ãã„ã—ã‚“ã¼ã†ãƒãƒ†ãƒˆã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 5040,
        "ingredients": {
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 7,
            "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": 14,
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 6,
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 9
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_36",
        "name": "ãƒ ãƒ©ã£ã‘ãƒãƒ§ã‚³ãƒŸãƒ¼ãƒˆã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 3665,
        "ingredients": {
            "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚«ã‚«ã‚ª": 14,
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 9
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_37",
        "name": "ã†ã‚‹ãŠã„ã¨ã†ãµã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 3113,
        "ingredients": {
            "ãƒ¯ã‚«ã‚¯ã‚µå¤§è±†": 15,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 9
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_38",
        "name": "ã°ã‹ã¢ã‹ã‚‰ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 3046,
        "ingredients": {
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 9,
            "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": 3,
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 5,
            "ã‚ã£ãŸã‹ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼": 6
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_39",
        "name": "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ã‚«ãƒ—ãƒ¬ãƒ¼ã‚¼",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 2942,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 12,
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 5,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 6
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_40",
        "name": "ã‚ã‚“ãˆãã­ãã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 2845,
        "ingredients": {
            "ãµã¨ã„ãªãŒã­ã": 10,
            "ã‚ã£ãŸã‹ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼": 5
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_41",
        "name": "ã¿ã ã‚Œã¥ãã‚³ãƒ¼ãƒ³ã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 2785,
        "ingredients": {
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 8,
            "ãƒ¯ã‚«ã‚¯ã‚µã‚³ãƒ¼ãƒ³": 9
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_42",
        "name": "ãƒ¡ãƒ­ãƒ¡ãƒ­ã‚Šã‚“ã”ã®ãƒãƒ¼ã‚ºã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 2655,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 5,
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 3,
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 15
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_43",
        "name": "ã­ã£ã·ã†ã¨ã†ãµã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 2114,
        "ingredients": {
            "ãƒ¯ã‚«ã‚¯ã‚µå¤§è±†": 10,
            "ã’ãã‹ã‚‰ãƒãƒ¼ãƒ–": 6
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_44",
        "name": "ã‚†ãã‹ãã‚·ãƒ¼ã‚¶ãƒ¼ã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 1898,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 10,
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 6
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_45",
        "name": "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 1045,
        "ingredients": {
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 8
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_46",
        "name": "ãƒãƒ¡ãƒãƒ ã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 978,
        "ingredients": {
            "ãƒãƒ¡ãƒŸãƒ¼ãƒˆ": 8
        }
    },
    {
        "id": "ã‚µãƒ©ãƒ€_47",
        "name": "ã¨ãã›ã‚“ãƒªãƒ³ã‚´ã‚µãƒ©ãƒ€",
        "type": "ã‚µãƒ©ãƒ€",
        "energy": 855,
        "ingredients": {
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 8
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_48",
        "name": "ãƒ‰ã‚­ãƒ‰ã‚­ã“ã‚ã„ã‹ãŠãƒ‘ãƒ³ã‚±ãƒ¼ã‚­",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 24354,
        "ingredients": {
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 24,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 29,
            "ã‚ã¾ã„ãƒŸãƒ„": 32,
            "ãšã£ã—ã‚Šã‚«ãƒœãƒãƒ£": 18
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_49",
        "name": "ãƒ‰ã‚ªãƒ¼ã®ã‚¨ã‚¯ãƒ¬ã‚¢",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 20885,
        "ingredients": {
            "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚«ã‚«ã‚ª": 30,
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 26,
            "ã‚ã¾ã„ãƒŸãƒ„": 22,
            "ã‚ã–ã¾ã—ã‚³ãƒ¼ãƒ’ãƒ¼": 24
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_50",
        "name": "ã‚¹ãƒ‘ãƒ¼ã‚¯ã‚¹ãƒ‘ã‚¤ã‚¹ã‚³ãƒ¼ãƒ©",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 17494,
        "ingredients": {
            "ãµã¨ã„ãªãŒã­ã": 20,
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 35,
            "ã‚ã£ãŸã‹ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼": 20,
            "ã‚ã–ã¾ã—ã‚³ãƒ¼ãƒ’ãƒ¼": 12
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_51",
        "name": "ãƒ•ãƒ©ãƒ¯ãƒ¼ã‚®ãƒ•ãƒˆãƒã‚«ãƒ­ãƒ³",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 13834,
        "ingredients": {
            "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚«ã‚«ã‚ª": 25,
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 10,
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 25,
            "ã‚ã¾ã„ãƒŸãƒ„": 17
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_52",
        "name": "ãŠã¡ã‚ƒã‹ã„ã‚³ãƒ¼ãƒ³ã‚¹ã‚³ãƒ¼ãƒ³",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 10925,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 9,
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 20,
            "ã‚ã£ãŸã‹ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼": 20,
            "ãƒ¯ã‚«ã‚¯ã‚µã‚³ãƒ¼ãƒ³": 18
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_53",
        "name": "ã‚°ãƒ©ã‚¹ãƒŸã‚­ã‚µãƒ¼ã‚¹ãƒ ãƒ¼ã‚¸ãƒ¼",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 8165,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 14,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 16,
            "ã¤ã‚„ã¤ã‚„ã‚¢ãƒœã‚«ãƒ‰": 18
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_54",
        "name": "ãƒ—ãƒªãƒ³ã®ãƒ—ãƒªãƒ³ã‚¢ãƒ©ãƒ¢ãƒ¼ãƒ‰",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 7594,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 10,
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 10,
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 15,
            "ã‚ã¾ã„ãƒŸãƒ„": 20
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_55",
        "name": "ã‹ãŸã‚„ã¶ã‚Šã‚³ãƒ¼ãƒ³ãƒ†ã‚£ãƒ©ãƒŸã‚¹",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 7125,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 12,
            "ãƒ¯ã‚«ã‚¯ã‚µã‚³ãƒ¼ãƒ³": 14,
            "ã‚ã–ã¾ã—ã‚³ãƒ¼ãƒ’ãƒ¼": 14
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_56",
        "name": "ã¯ã‚„ãŠãã‚³ãƒ¼ãƒ’ãƒ¼ã‚¼ãƒªãƒ¼",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 6793,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 14,
            "ã‚ã¾ã„ãƒŸãƒ„": 12,
            "ã‚ã–ã¾ã—ã‚³ãƒ¼ãƒ’ãƒ¼": 16
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_57",
        "name": "ã ã„ã°ãã¯ã¤ãƒãƒƒãƒ—ã‚³ãƒ¼ãƒ³",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 6048,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 7,
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 14,
            "ãƒ¯ã‚«ã‚¯ã‚µã‚³ãƒ¼ãƒ³": 15
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_58",
        "name": "ã¡ã‹ã‚‰ã‚‚ã¡ã‚½ã‚¤ãƒ‰ãƒ¼ãƒŠãƒƒãƒ„",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 5547,
        "ingredients": {
            "ãƒ¯ã‚«ã‚¯ã‚µå¤§è±†": 16,
            "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚«ã‚«ã‚ª": 7,
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 12
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_59",
        "name": "ãƒãƒ­ãƒªã®ãƒ‡ãƒˆãƒƒã‚¯ã‚¹ãƒ†ã‚£ãƒ¼",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 5065,
        "ingredients": {
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 15,
            "ã‚ã£ãŸã‹ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼": 11,
            "ã‚ã˜ã‚ã„ã‚­ãƒã‚³": 9
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_60",
        "name": "ãµãã¤ã®ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼ã‚¯ãƒƒã‚­ãƒ¼",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 4921,
        "ingredients": {
            "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚«ã‚«ã‚ª": 5,
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 4,
            "ã‚ã¾ã„ãƒŸãƒ„": 14,
            "ã‚ã£ãŸã‹ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼": 12
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_61",
        "name": "ã‚ãã¾ã®ã‚­ãƒƒã‚¹ãƒ•ãƒ«ãƒ¼ãƒ„ã‚ªãƒ¬",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 4734,
        "ingredients": {
            "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚«ã‚«ã‚ª": 8,
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 9,
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 11,
            "ã‚ã¾ã„ãƒŸãƒ„": 7
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_62",
        "name": "ã‚ã¾ã„ã‹ãŠã‚Šãƒãƒ§ã‚³ã‚±ãƒ¼ã‚­",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 3378,
        "ingredients": {
            "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚«ã‚«ã‚ª": 8,
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 7,
            "ã‚ã¾ã„ãƒŸãƒ„": 9
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_63",
        "name": "ã¯ãªã³ã‚‰ã®ã¾ã„ãƒãƒ§ã‚³ã‚¿ãƒ«ãƒˆ",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 3314,
        "ingredients": {
            "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚«ã‚«ã‚ª": 11,
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 11
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_64",
        "name": "ã¯ã‚Šãã‚Šãƒ—ãƒ­ãƒ†ã‚¤ãƒ³ã‚¹ãƒ ãƒ¼ã‚¸ãƒ¼",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 3168,
        "ingredients": {
            "ãƒ¯ã‚«ã‚¯ã‚µå¤§è±†": 15,
            "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚«ã‚«ã‚ª": 8
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_65",
        "name": "ãŠãŠãã„ãƒãƒ©ã‚µãƒ€",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 3015,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 7,
            "ãƒ”ãƒ¥ã‚¢ãªã‚ªã‚¤ãƒ«": 10,
            "ã‚ã¾ã„ãƒŸãƒ„": 6
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_66",
        "name": "ã‹ã‚‹ã‚ã–ã‚½ã‚¤ã‚±ãƒ¼ã‚­",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 1924,
        "ingredients": {
            "ãƒ¯ã‚«ã‚¯ã‚µå¤§è±†": 7,
            "ã¨ãã›ã‚“ã‚¨ãƒƒã‚°": 8
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_67",
        "name": "ãƒã‚¤ãƒšãƒ¼ã‚¹ã‚„ã•ã„ã‚¸ãƒ¥ãƒ¼ã‚¹",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 1924,
        "ingredients": {
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 7,
            "ã‚ã‚“ã¿ã‚“ãƒˆãƒãƒˆ": 9
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_68",
        "name": "ã²ã®ã“ã®ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼ãƒ†ã‚£ãƒ¼",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 1913,
        "ingredients": {
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 7,
            "ã‚ã£ãŸã‹ã‚¸ãƒ³ã‚¸ãƒ£ãƒ¼": 9
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_69",
        "name": "ã˜ã‚…ãã›ã„ã‚¹ã‚¤ãƒ¼ãƒˆãƒãƒ†ãƒˆ",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 1907,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 5,
            "ã»ã£ã“ã‚Šãƒãƒ†ãƒˆ": 9
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_70",
        "name": "ã­ãŒã„ã”ã¨ã‚¢ãƒƒãƒ—ãƒ«ãƒ‘ã‚¤",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 1748,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 4,
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 12
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_71",
        "name": "ã‚¯ãƒ©ãƒ•ãƒˆã‚µã‚¤ã‚³ã‚½ãƒ¼ãƒ€",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 1079,
        "ingredients": {
            "ã‚ã¾ã„ãƒŸãƒ„": 9
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_72",
        "name": "ã¨ãã›ã‚“ãƒªãƒ³ã‚´ã‚¸ãƒ¥ãƒ¼ã‚¹",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 855,
        "ingredients": {
            "ã¨ãã›ã‚“ãƒªãƒ³ã‚´": 8
        }
    },
    {
        "id": "ãƒ‡ã‚¶ãƒ¼ãƒˆ_73",
        "name": "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒ›ãƒƒãƒˆãƒŸãƒ«ã‚¯",
        "type": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
        "energy": 814,
        "ingredients": {
            "ãƒ¢ãƒ¼ãƒ¢ãƒ¼ãƒŸãƒ«ã‚¯": 7
        }
    }
];

    // === ã‚¢ãƒ—ãƒªã®çŠ¶æ…‹ ===
    let state = {};
    let savedSets = {};
    let activeCategories = new Set(['ã‚«ãƒ¬ãƒ¼', 'ã‚µãƒ©ãƒ€', 'ãƒ‡ã‚¶ãƒ¼ãƒˆ']);

    // === åˆæœŸåŒ– ===
    function init() {
        const saved = localStorage.getItem('pokeSleepPlanner');
        if (saved) {
            state = JSON.parse(saved);
        } else {
            RECIPES.forEach(r => state[r.id] = 0);
        }
        
        initSavedSets();
        adjustThresholdBasedOnState();
        updateFilterButtons();
        applyFilters();
        updateCalculation();
    }

    // === Modal Logic ===
    function openModal() {
        document.getElementById('setModal').style.display = 'block';
    }
    
    function closeModal() {
        document.getElementById('setModal').style.display = 'none';
    }
    
    window.onclick = function(event) {
        const modal = document.getElementById('setModal');
        if (event.target == modal) {
            closeModal();
        }
    }

    // === ä¿å­˜ã‚»ãƒƒãƒˆé–¢é€£ ===
    function initSavedSets() {
        const saved = localStorage.getItem('pokeSleepSavedSets');
        if(saved) {
            savedSets = JSON.parse(saved);
        }
        renderSavedSets();
    }

    function saveCurrentSet() {
        const input = document.getElementById('set-name-input');
        const name = input.value.trim();
        
        if(!name) {
            alert("ã‚»ãƒƒãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
            return;
        }
        
        if(savedSets[name]) {
            delete savedSets[name];
        }
        
        savedSets[name] = JSON.parse(JSON.stringify(state));
        localStorage.setItem('pokeSleepSavedSets', JSON.stringify(savedSets));
        
        input.value = '';
        renderSavedSets();
    }

    function loadSet(name) {
        if(confirm(`ã‚»ãƒƒãƒˆã€Œ${name}ã€ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã‹ï¼Ÿ\nç¾åœ¨ã®é¸æŠå†…å®¹ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚`)) {
            const set = savedSets[name];
            if(set) {
                RECIPES.forEach(r => {
                    if (set[r.id] === undefined) set[r.id] = 0;
                });
                state = JSON.parse(JSON.stringify(set));
                
                adjustThresholdBasedOnState();
                saveAndUpdate();
                closeModal();
            }
        }
    }

    function deleteSet(name) {
        if(confirm(`ã‚»ãƒƒãƒˆã€Œ${name}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
            delete savedSets[name];
            localStorage.setItem('pokeSleepSavedSets', JSON.stringify(savedSets));
            renderSavedSets();
        }
    }

    function renameSet(oldName) {
        const newName = prompt("ã‚»ãƒƒãƒˆåã®å¤‰æ›´:", oldName);
        if(newName && newName.trim() && newName !== oldName) {
            if(savedSets[newName]) {
                alert("åŒåã®ã‚»ãƒƒãƒˆãŒæ—¢ã«å­˜åœ¨ã—ã¾ã™");
                return;
            }
            
            const newSavedSets = {};
            Object.keys(savedSets).forEach(key => {
                if(key === oldName) {
                    newSavedSets[newName] = savedSets[key];
                } else {
                    newSavedSets[key] = savedSets[key];
                }
            });
            savedSets = newSavedSets;
            localStorage.setItem('pokeSleepSavedSets', JSON.stringify(savedSets));
            renderSavedSets();
        }
    }

    // === Drag and Drop Logic (Touch Support Added) ===
    let dragSrcEl = null;

    // Mouse Events
    function handleDragStart(e) {
        dragSrcEl = this;
        e.dataTransfer.effectAllowed = 'move';
        e.dataTransfer.setData('text/html', this.innerHTML);
        this.classList.add('dragging');
    }

    function handleDragOver(e) {
        if (e.preventDefault) { e.preventDefault(); }
        e.dataTransfer.dropEffect = 'move';
        
        const list = document.getElementById('saved-sets-list');
        const afterElement = getDragAfterElement(list, e.clientY);
        
        if (afterElement == null) {
            list.appendChild(dragSrcEl);
        } else {
            list.insertBefore(dragSrcEl, afterElement);
        }
        return false;
    }

    function handleDragEnter(e) {}
    function handleDragLeave(e) {}
    function handleDrop(e) { if (e.stopPropagation) { e.stopPropagation(); } return false; }
    function handleDragEnd(e) { this.classList.remove('dragging'); saveReorderedSets(); }

    // Touch Events (iOS/Android)
    function handleTouchStart(e) {
        // Prevent sorting if touching buttons
        if (e.target.tagName === 'BUTTON') return;
        
        dragSrcEl = this;
        this.classList.add('dragging');
    }

    function handleTouchMove(e) {
        if (e.preventDefault) { e.preventDefault(); } // Stop scrolling while dragging
        
        const touch = e.touches[0];
        const list = document.getElementById('saved-sets-list');
        const afterElement = getDragAfterElement(list, touch.clientY);
        
        if (afterElement == null) {
            list.appendChild(dragSrcEl);
        } else {
            list.insertBefore(dragSrcEl, afterElement);
        }
    }

    function handleTouchEnd(e) {
        this.classList.remove('dragging');
        saveReorderedSets();
    }
    
    function getDragAfterElement(container, y) {
        const draggableElements = [...container.querySelectorAll('.saved-set-item:not(.dragging)')];

        return draggableElements.reduce((closest, child) => {
            const box = child.getBoundingClientRect();
            const offset = y - box.top - box.height / 2;
            if (offset < 0 && offset > closest.offset) {
                return { offset: offset, element: child };
            } else {
                return closest;
            }
        }, { offset: Number.NEGATIVE_INFINITY }).element;
    }
    
    function saveReorderedSets() {
        const listItems = document.querySelectorAll('.saved-set-item');
        const newSavedSets = {};
        
        listItems.forEach(li => {
            const name = li.getAttribute('data-set-name');
            if(savedSets[name]) {
                newSavedSets[name] = savedSets[name];
            }
        });
        
        savedSets = newSavedSets;
        localStorage.setItem('pokeSleepSavedSets', JSON.stringify(savedSets));
    }

    function renderSavedSets() {
        const list = document.getElementById('saved-sets-list');
        list.innerHTML = '';
        
        Object.keys(savedSets).forEach(name => {
            const li = document.createElement('li');
            li.className = 'saved-set-item';
            
            // PCå‘ã‘ã®ãƒã‚¦ã‚¹ãƒ‰ãƒ©ãƒƒã‚°è¨­å®šï¼ˆã“ã‚Œã¯è¡Œå…¨ä½“ã®ã¾ã¾ã§OKï¼‰
            li.setAttribute('draggable', 'true');
            li.setAttribute('data-set-name', name);
            
            // Mouse Events (PCç”¨)
            li.addEventListener('dragstart', handleDragStart);
            li.addEventListener('dragover', handleDragOver);
            li.addEventListener('dragenter', handleDragEnter);
            li.addEventListener('dragleave', handleDragLeave);
            li.addEventListener('dragend', handleDragEnd);
            li.addEventListener('drop', handleDrop);
    
            // â˜…å¤‰æ›´ç‚¹1: HTMLæ§‹é€ ã‚’å¤‰ãˆã¦ã€ã€Œå·¦å´(ãƒ‰ãƒ©ãƒƒã‚°ç”¨)ã€ã¨ã€Œå³å´(ãƒœã‚¿ãƒ³)ã€ã‚’åˆ†ã‘ã¾ã™
            li.innerHTML = `
                <div class="drag-touch-zone" style="display: flex; align-items: center; flex-grow: 1; cursor: grab; touch-action: none;">
                    <span class="drag-handle" style="margin-right: 10px;">â‰¡</span>
                    <span class="set-name" onclick="loadSet('${name}')" title="ã‚¯ãƒªãƒƒã‚¯ã—ã¦å‘¼å‡º" style="flex-grow: 1;">ğŸ“ ${name}</span>
                </div>
                <div class="set-actions">
                    <button class="rename-btn" onclick="renameSet('${name}')">âœï¸</button>
                    <button class="load-btn" onclick="loadSet('${name}')">å‘¼å‡º</button>
                    <button class="delete-btn" onclick="deleteSet('${name}')">ğŸ—‘ï¸</button>
                </div>
                `;
    
            // â˜…å¤‰æ›´ç‚¹2: iOSç”¨ã®ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆã‚’ã€liå…¨ä½“ã§ã¯ãªãã€Œå·¦å´ã®ã‚¨ãƒªã‚¢ã€ã ã‘ã«ä»˜ã‘æ›¿ãˆã‚‹
            // ã“ã‚Œã«ã‚ˆã‚Šã€å³å´ã®ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ã‚’è§¦ã£ã¦ã‚‚ãƒ‰ãƒ©ãƒƒã‚°åˆ¤å®šã•ã‚Œãšã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™
            const touchZone = li.querySelector('.drag-touch-zone');
    
            // Touch Events (for iOS) - Attach ONLY to the left zone
            touchZone.addEventListener('touchstart', handleTouchStart, {passive: false});
            touchZone.addEventListener('touchmove', handleTouchMove, {passive: false});
            touchZone.addEventListener('touchend', handleTouchEnd);
            
            list.appendChild(li);
        });
    }
        
        if(Object.keys(savedSets).length === 0) {
            list.innerHTML = '<li style="color:#999; padding:10px; text-align:center; font-size:0.8rem;">ä¿å­˜ã•ã‚ŒãŸã‚»ãƒƒãƒˆã¯ã‚ã‚Šã¾ã›ã‚“</li>';
        }
    }

    function adjustThresholdBasedOnState() {
        let minSelectedEnergy = Infinity;
        let hasSelection = false;

        Object.keys(state).forEach(id => {
            if (state[id] > 0) {
                const recipe = RECIPES.find(r => r.id === id);
                if (recipe) {
                    hasSelection = true;
                    if (recipe.energy < minSelectedEnergy) {
                        minSelectedEnergy = recipe.energy;
                    }
                }
            }
        });

        const input = document.getElementById('energy-threshold');
        const currentThreshold = parseInt(input.value) || 10000;

        if (hasSelection && minSelectedEnergy <= currentThreshold) {
            const newThreshold = Math.floor((minSelectedEnergy - 1) / 1000) * 1000;
            input.value = Math.max(0, newThreshold);
        }
    }

    function setCategory(type) {
        const types = ['ã‚«ãƒ¬ãƒ¼', 'ã‚µãƒ©ãƒ€', 'ãƒ‡ã‚¶ãƒ¼ãƒˆ'];
        if (type === 'all') {
            const isAllSelected = types.every(t => activeCategories.has(t));
            if (isAllSelected) {
                activeCategories.clear();
            } else {
                activeCategories = new Set(types);
            }
        } else {
            if (activeCategories.has(type)) {
                activeCategories.delete(type);
            } else {
                activeCategories.add(type);
            }
        }
        updateFilterButtons();
        applyFilters();
    }

    function updateFilterButtons() {
        const types = ['ã‚«ãƒ¬ãƒ¼', 'ã‚µãƒ©ãƒ€', 'ãƒ‡ã‚¶ãƒ¼ãƒˆ'];
        
        types.forEach(type => {
            const btn = document.getElementById(`btn-${type}`);
            if (activeCategories.has(type)) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });

        const btnAll = document.getElementById('btn-all');
        const isAllActive = types.every(t => activeCategories.has(t));
        if (isAllActive) {
            btnAll.classList.add('active');
        } else {
            btnAll.classList.remove('active');
        }
    }

    function updateHiddenAlert(filteredRecipes, threshold) {
        let hiddenCount = 0;

        Object.keys(state).forEach(id => {
            if (state[id] > 0) {
                const recipe = RECIPES.find(r => r.id === id);
                if (recipe) {
                    const isVisible = activeCategories.has(recipe.type) && (recipe.energy > threshold);
                    if (!isVisible) hiddenCount++;
                }
            }
        });

        const alertEl = document.getElementById('hidden-alert');
        if (hiddenCount > 0) {
            alertEl.classList.add('alert-active');
            alertEl.textContent = `âš ï¸ é¸æŠæ¸ˆã¿ã®éè¡¨ç¤ºæ–™ç†ï¼š${hiddenCount}`;
        } else {
            alertEl.classList.remove('alert-active');
            alertEl.textContent = `é¸æŠæ¸ˆã¿ã®éè¡¨ç¤ºæ–™ç†ï¼š0`;
        }
    }

    function applyFilters() {
        const threshold = parseInt(document.getElementById('energy-threshold').value) || 0;
        
        const container = document.getElementById('recipe-list');
        container.innerHTML = '';

        const filtered = RECIPES.filter(r => {
            const typeMatch = activeCategories.has(r.type);
            const energyMatch = r.energy > threshold; 
            return typeMatch && energyMatch;
        });

        updateHiddenAlert(filtered, threshold);

        filtered.forEach(recipe => {
            const count = state[recipe.id] || 0;
            const div = document.createElement('div');
            div.className = `recipe-card ${count > 0 ? 'selected' : ''}`;
            div.onclick = (e) => {
                if(e.target.tagName === 'BUTTON') return;
                increment(recipe.id);
            };

            const imgPath = `images/${recipe.name}.png`;
            const totalIng = Object.values(recipe.ingredients).reduce((sum, num) => sum + num, 0);

            div.innerHTML = `
                <div class="recipe-meta">
                    <span class="meta-energy">âš¡${recipe.energy.toLocaleString()}</span>
                    <span class="meta-ing">${totalIng}å€‹</span>
                </div>
                <img src="${imgPath}" alt="${recipe.name}" class="recipe-img" onerror="this.style.display='none'">
                <div class="recipe-name">${recipe.name}</div>
                <div class="count-badge ${count === 0 ? 'hidden' : ''}">${count}</div>
                <div class="card-controls ${count > 0 ? '' : 'hidden'}">
                    <button class="sub-btn" onclick="decrement('${recipe.id}')">ï¼</button>
                </div>
            `;
            container.appendChild(div);
        });
    }

    function increment(id) {
        state[id] = (state[id] || 0) + 1;
        saveAndUpdate();
    }

    function decrement(id) {
        if (state[id] > 0) state[id]--;
        saveAndUpdate();
    }

    function resetAll() {
        Object.keys(state).forEach(k => state[k] = 0);
        saveAndUpdate();
    }

    function saveAndUpdate() {
        localStorage.setItem('pokeSleepPlanner', JSON.stringify(state));
        applyFilters(); 
        updateCalculation();
    }

    function updateCalculation() {
        const categoryTotals = {
            'ã‚«ãƒ¬ãƒ¼': {},
            'ã‚µãƒ©ãƒ€': {},
            'ãƒ‡ã‚¶ãƒ¼ãƒˆ': {}
        };
        
        let totalMeals = 0;

        Object.keys(state).forEach(id => {
            const count = state[id];
            if (count > 0) {
                totalMeals += count;
                const recipe = RECIPES.find(r => r.id === id);
                if (recipe) {
                    const type = recipe.type; 
                    if (categoryTotals[type]) {
                        Object.entries(recipe.ingredients).forEach(([ing, num]) => {
                            categoryTotals[type][ing] = (categoryTotals[type][ing] || 0) + (num * count);
                        });
                    }
                }
            }
        });

        const finalIngredients = {};
        const usedIngredients = new Set();
        Object.values(categoryTotals).forEach(totals => {
            Object.keys(totals).forEach(ing => usedIngredients.add(ing));
        });

        usedIngredients.forEach(ing => {
            const maxCount = Math.max(
                categoryTotals['ã‚«ãƒ¬ãƒ¼'][ing] || 0,
                categoryTotals['ã‚µãƒ©ãƒ€'][ing] || 0,
                categoryTotals['ãƒ‡ã‚¶ãƒ¼ãƒˆ'][ing] || 0
            );
            if (maxCount > 0) {
                finalIngredients[ing] = maxCount;
            }
        });

        let totalItems = 0;
        Object.values(finalIngredients).forEach(count => totalItems += count);
        
        const countDisplay = document.getElementById('needed-count-display');
        if (countDisplay) {
            countDisplay.textContent = `(è¨ˆ: ${totalItems}å€‹)`;
        }

        const neededList = document.getElementById('needed-list');
        neededList.innerHTML = '';
        
        const neededKeys = ALL_INGREDIENTS.filter(ing => finalIngredients[ing] > 0);
        
        if (neededKeys.length === 0) {
            neededList.innerHTML = '<li style="color:#999; text-align:center; padding:10px;">æ–™ç†ã‚’é¸æŠã—ã¦ãã ã•ã„</li>';
        } else {
            neededKeys.forEach(ing => {
                const li = document.createElement('li');
                li.className = 'ingredient-item needed-tag';
                const icon = ING_ICONS[ing] || 'ğŸ“¦';
                
                li.innerHTML = `
                    <span class="ing-name">${icon} ${ing}</span>
                    <span class="ing-count">${finalIngredients[ing]}å€‹</span>
                `;
                neededList.appendChild(li);
            });
        }

        const surplusList = document.getElementById('surplus-list');
        surplusList.innerHTML = '';
        const surplus = ALL_INGREDIENTS.filter(ing => !finalIngredients[ing]);
        
        surplus.forEach(ing => {
            const li = document.createElement('li');
            li.className = 'ingredient-item surplus-tag';
            const icon = ING_ICONS[ing] || 'ğŸ“¦';

            li.innerHTML = `
                <span class="ing-name">${icon} ${ing}</span>
            `;
            surplusList.appendChild(li);
        });

        document.getElementById('total-meals').textContent = totalMeals;
    }

    init();
</script>

</body>
</html>
